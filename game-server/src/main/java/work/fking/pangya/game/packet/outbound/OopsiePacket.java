package work.fking.pangya.game.packet.outbound;

import io.netty.buffer.ByteBuf;
import io.netty.buffer.ByteBufUtil;
import work.fking.pangya.networking.protocol.OutboundPacket;
import work.fking.pangya.networking.protocol.ProtocolUtils;

import java.time.LocalDateTime;

public class OopsiePacket implements OutboundPacket {

    @Override
    public void encode(ByteBuf target) {
        // we should call it the handoverresult packet
        // 0x44
        // 1, 9, 10, 12, 13 = causes the client to send select server packet & reconnect to the login server, probably used if the login key doesn't match
        // 3 = cannot connect to the login server
        // 5 = this id has been permanently blocked, contact support...
        // 7 = this id has been blocked, contact support...
        // 9 = reconnects too
        // 11 = Server version missmatch
        // 14, 15 = only certain allowed users may join this server.
        // 16, 17 = pangya is not available in your area
        // 19...31 = Account has been transferred
        // 210 = updates progress bar
        // 211 = login ok?

        //
        target.writeShortLE(0x44);
        target.writeByte(0xd3);
        target.writeByte(0);

        int[] values = {0x01, 0x03, 0x1C, 0x1E, 0x20, 0x05, 0x08, 0x0B, 0x10, 0x12};
        // progress bar
        for (int i = 0; i < values.length; i++) {
            target.writeShortLE(0x44);
            target.writeByte(210);
            target.writeIntLE(values[i]);
        }

        //unknown
        target.writeBytes(new byte[] {0x1F, 0x01, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00});

        int[] values2 = {0x15, 0x0E, 0x14, 0x16, 0x18, 0x1A, 0x22};
        // progress bar
        for (int i = 0; i < values2.length; i++) {
            target.writeShortLE(0x44);
            target.writeByte(210);
            target.writeIntLE(values2[i]);
        }

        target.writeShortLE(0x44);
        target.writeByte(0);
        ProtocolUtils.writePString(target, "US852");
        ProtocolUtils.writePString(target, "hexserver_dev");
        target.writeShortLE(0xFFFF);
        ProtocolUtils.writeFixedSizeString(target, "hexagon", 32); // username
        ProtocolUtils.writeFixedSizeString(target, "Hexagon", 32); // nickname
        ProtocolUtils.writeFixedSizeString(target, "Guild", 17); // guildName
        ProtocolUtils.writeFixedSizeString(target, "GuildImg", 9); // guildImage
        target.writeBytes(new byte[7]);
        target.writeIntLE(0);
        target.writeByte(0);
        target.writeIntLE(0); // connectionId
        target.writeBytes(new byte[12]);
        target.writeIntLE(0);
        target.writeIntLE(0);
        target.writeShortLE(0);
        target.writeIntLE(0);
        target.writeShortLE(0);
        target.writeBytes(new byte[12]);
        ProtocolUtils.writeFixedSizeString(target, "unknown", 18);
        target.writeBytes(new byte[114]);
        target.writeIntLE(0); // uid??

        byte[] bigChungus = ByteBufUtil.decodeHexDump(
                "00000000000000009B0400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020F40E00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000E8030000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000FFFFFFFF00000000000000000000000000000000000000000000");
        target.writeBytes(bigChungus);

        target.writeBytes(new byte[76]); // trophies

        // equipment info
        target.writeIntLE(0);
        target.writeIntLE(67108874);
        target.writeIntLE(0);
        target.writeIntLE(0);
        target.writeBytes(new byte[40]);

        // decoration
        target.writeIntLE(0);
        target.writeIntLE(0);
        target.writeIntLE(0);
        target.writeIntLE(0);
        target.writeIntLE(0);
        target.writeIntLE(0);

        target.writeIntLE(0);
        target.writeIntLE(0);
        target.writeIntLE(0);
        target.writeIntLE(0);
        target.writeIntLE(0);
        target.writeIntLE(0);

        // map statistics
        bigChungus = ByteBufUtil.decodeHexDump("000000000000000000000000000000000000000000000000000000000000000000000000007F0000000000000000000000000001000000000000000000000000000000000000000000000000000000007F0000000000000000000000000002000000000000000000000000000000000000000000000000000000007F0000000000000000000000000003000000000000000000000000000000000000000000000000000000007F0000000000000000000000000004000000000000000000000000000000000000000000000000000000007F0000000000000000000000000005000000000000000000000000000000000000000000000000000000007F0000000000000000000000000006000000000000000000000000000000000000000000000000000000007F0000000000000000000000000007000000000000000000000000000000000000000000000000000000007F0000000000000000000000000008000000000000000000000000000000000000000000000000000000007F0000000000000000000000000009000000000000000000000000000000000000000000000000000000007F000000000000000000000000000A000000000000000000000000000000000000000000000000000000007F000000000000000000000000000B000000000000000000000000000000000000000000000000000000007F000000000000000000000000000C000000000000000000000000000000000000000000000000000000007F000000000000000000000000000D000000000000000000000000000000000000000000000000000000007F000000000000000000000000000E000000000000000000000000000000000000000000000000000000007F000000000000000000000000000F000000000000000000000000000000000000000000000000000000007F0000000000000000000000000010000000000000000000000000000000000000000000000000000000007F0000000000000000000000000011000000000000000000000000000000000000000000000000000000007F0000000000000000000000000012000000000000000000000000000000000000000000000000000000007F0000000000000000000000000013000000000000000000000000000000000000000000000000000000007F0000000000000000000000000014000000000000000000000000000000000000000000000000000000007F0000000000000000000000000000000000000000000000000000000000000000000000000000000000007F0000000000000000000000000001000000000000000000000000000000000000000000000000000000007F0000000000000000000000000002000000000000000000000000000000000000000000000000000000007F0000000000000000000000000003000000000000000000000000000000000000000000000000000000007F0000000000000000000000000004000000000000000000000000000000000000000000000000000000007F0000000000000000000000000005000000000000000000000000000000000000000000000000000000007F0000000000000000000000000006000000000000000000000000000000000000000000000000000000007F0000000000000000000000000007000000000000000000000000000000000000000000000000000000007F0000000000000000000000000008000000000000000000000000000000000000000000000000000000007F0000000000000000000000000009000000000000000000000000000000000000000000000000000000007F000000000000000000000000000A000000000000000000000000000000000000000000000000000000007F000000000000000000000000000B000000000000000000000000000000000000000000000000000000007F000000000000000000000000000C000000000000000000000000000000000000000000000000000000007F000000000000000000000000000D000000000000000000000000000000000000000000000000000000007F000000000000000000000000000E000000000000000000000000000000000000000000000000000000007F000000000000000000000000000F000000000000000000000000000000000000000000000000000000007F0000000000000000000000000010000000000000000000000000000000000000000000000000000000007F0000000000000000000000000011000000000000000000000000000000000000000000000000000000007F0000000000000000000000000012000000000000000000000000000000000000000000000000000000007F0000000000000000000000000013000000000000000000000000000000000000000000000000000000007F0000000000000000000000000014000000000000000000000000000000000000000000000000000000007F0000000000000000000000000000000000000000000000000000000000000000000000000000000000007F0000000000000000000000000001000000000000000000000000000000000000000000000000000000007F0000000000000000000000000002000000000000000000000000000000000000000000000000000000007F0000000000000000000000000003000000000000000000000000000000000000000000000000000000007F0000000000000000000000000004000000000000000000000000000000000000000000000000000000007F0000000000000000000000000005000000000000000000000000000000000000000000000000000000007F0000000000000000000000000006000000000000000000000000000000000000000000000000000000007F0000000000000000000000000007000000000000000000000000000000000000000000000000000000007F0000000000000000000000000008000000000000000000000000000000000000000000000000000000007F0000000000000000000000000009000000000000000000000000000000000000000000000000000000007F000000000000000000000000000A000000000000000000000000000000000000000000000000000000007F000000000000000000000000000B000000000000000000000000000000000000000000000000000000007F000000000000000000000000000C000000000000000000000000000000000000000000000000000000007F000000000000000000000000000D000000000000000000000000000000000000000000000000000000007F000000000000000000000000000E000000000000000000000000000000000000000000000000000000007F000000000000000000000000000F000000000000000000000000000000000000000000000000000000007F0000000000000000000000000010000000000000000000000000000000000000000000000000000000007F0000000000000000000000000011000000000000000000000000000000000000000000000000000000007F0000000000000000000000000012000000000000000000000000000000000000000000000000000000007F0000000000000000000000000013000000000000000000000000000000000000000000000000000000007F0000000000000000000000000014000000000000000000000000000000000000000000000000000000007F0000000000000000000000000000000000000000000000000000000000000000000000000000000000007F0000000000000000000000000001000000000000000000000000000000000000000000000000000000007F0000000000000000000000000002000000000000000000000000000000000000000000000000000000007F0000000000000000000000000003000000000000000000000000000000000000000000000000000000007F0000000000000000000000000004000000000000000000000000000000000000000000000000000000007F0000000000000000000000000005000000000000000000000000000000000000000000000000000000007F0000000000000000000000000006000000000000000000000000000000000000000000000000000000007F0000000000000000000000000007000000000000000000000000000000000000000000000000000000007F0000000000000000000000000008000000000000000000000000000000000000000000000000000000007F0000000000000000000000000009000000000000000000000000000000000000000000000000000000007F000000000000000000000000000A000000000000000000000000000000000000000000000000000000007F000000000000000000000000000B000000000000000000000000000000000000000000000000000000007F000000000000000000000000000C000000000000000000000000000000000000000000000000000000007F000000000000000000000000000D000000000000000000000000000000000000000000000000000000007F000000000000000000000000000E000000000000000000000000000000000000000000000000000000007F000000000000000000000000000F000000000000000000000000000000000000000000000000000000007F0000000000000000000000000010000000000000000000000000000000000000000000000000000000007F0000000000000000000000000011000000000000000000000000000000000000000000000000000000007F0000000000000000000000000012000000000000000000000000000000000000000000000000000000007F0000000000000000000000000013000000000000000000000000000000000000000000000000000000007F0000000000000000000000000014000000000000000000000000000000000000000000000000000000007F0000000000000000000000000000000000000000000000000000000000000000000000000000000000007F0000000000000000000000000001000000000000000000000000000000000000000000000000000000007F0000000000000000000000000002000000000000000000000000000000000000000000000000000000007F0000000000000000000000000003000000000000000000000000000000000000000000000000000000007F0000000000000000000000000004000000000000000000000000000000000000000000000000000000007F0000000000000000000000000005000000000000000000000000000000000000000000000000000000007F0000000000000000000000000006000000000000000000000000000000000000000000000000000000007F0000000000000000000000000007000000000000000000000000000000000000000000000000000000007F0000000000000000000000000008000000000000000000000000000000000000000000000000000000007F0000000000000000000000000009000000000000000000000000000000000000000000000000000000007F000000000000000000000000000A000000000000000000000000000000000000000000000000000000007F000000000000000000000000000B000000000000000000000000000000000000000000000000000000007F000000000000000000000000000C000000000000000000000000000000000000000000000000000000007F000000000000000000000000000D000000000000000000000000000000000000000000000000000000007F000000000000000000000000000E000000000000000000000000000000000000000000000000000000007F000000000000000000000000000F000000000000000000000000000000000000000000000000000000007F0000000000000000000000000010000000000000000000000000000000000000000000000000000000007F0000000000000000000000000011000000000000000000000000000000000000000000000000000000007F0000000000000000000000000012000000000000000000000000000000000000000000000000000000007F0000000000000000000000000013000000000000000000000000000000000000000000000000000000007F0000000000000000000000000014000000000000000000000000000000000000000000000000000000007F0000000000000000000000000000000000000000000000000000000000000000000000000000000000007F0000000000000000000000000001000000000000000000000000000000000000000000000000000000007F0000000000000000000000000002000000000000000000000000000000000000000000000000000000007F0000000000000000000000000003000000000000000000000000000000000000000000000000000000007F0000000000000000000000000004000000000000000000000000000000000000000000000000000000007F0000000000000000000000000005000000000000000000000000000000000000000000000000000000007F0000000000000000000000000006000000000000000000000000000000000000000000000000000000007F0000000000000000000000000007000000000000000000000000000000000000000000000000000000007F0000000000000000000000000008000000000000000000000000000000000000000000000000000000007F0000000000000000000000000009000000000000000000000000000000000000000000000000000000007F000000000000000000000000000A000000000000000000000000000000000000000000000000000000007F000000000000000000000000000B000000000000000000000000000000000000000000000000000000007F000000000000000000000000000C000000000000000000000000000000000000000000000000000000007F000000000000000000000000000D000000000000000000000000000000000000000000000000000000007F000000000000000000000000000E000000000000000000000000000000000000000000000000000000007F000000000000000000000000000F000000000000000000000000000000000000000000000000000000007F0000000000000000000000000010000000000000000000000000000000000000000000000000000000007F0000000000000000000000000011000000000000000000000000000000000000000000000000000000007F0000000000000000000000000012000000000000000000000000000000000000000000000000000000007F0000000000000000000000000013000000000000000000000000000000000000000000000000000000007F0000000000000000000000000014000000000000000000000000000000000000000000000000000000007F0000000000000000000000000000000000000000000000000000000000000000000000000000000000007F0000000000000000000000000001000000000000000000000000000000000000000000000000000000007F0000000000000000000000000002000000000000000000000000000000000000000000000000000000007F0000000000000000000000000003000000000000000000000000000000000000000000000000000000007F0000000000000000000000000004000000000000000000000000000000000000000000000000000000007F0000000000000000000000000005000000000000000000000000000000000000000000000000000000007F0000000000000000000000000006000000000000000000000000000000000000000000000000000000007F0000000000000000000000000007000000000000000000000000000000000000000000000000000000007F0000000000000000000000000008000000000000000000000000000000000000000000000000000000007F0000000000000000000000000009000000000000000000000000000000000000000000000000000000007F000000000000000000000000000A000000000000000000000000000000000000000000000000000000007F000000000000000000000000000B000000000000000000000000000000000000000000000000000000007F000000000000000000000000000C000000000000000000000000000000000000000000000000000000007F000000000000000000000000000D000000000000000000000000000000000000000000000000000000007F000000000000000000000000000E000000000000000000000000000000000000000000000000000000007F000000000000000000000000000F000000000000000000000000000000000000000000000000000000007F0000000000000000000000000010000000000000000000000000000000000000000000000000000000007F0000000000000000000000000011000000000000000000000000000000000000000000000000000000007F0000000000000000000000000012000000000000000000000000000000000000000000000000000000007F0000000000000000000000000013000000000000000000000000000000000000000000000000000000007F0000000000000000000000000014000000000000000000000000000000000000000000000000000000007F0000000000000000000000000000000000000000000000000000000000000000000000000000000000007F0000000000000000000000000001000000000000000000000000000000000000000000000000000000007F0000000000000000000000000002000000000000000000000000000000000000000000000000000000007F0000000000000000000000000003000000000000000000000000000000000000000000000000000000007F0000000000000000000000000004000000000000000000000000000000000000000000000000000000007F0000000000000000000000000005000000000000000000000000000000000000000000000000000000007F0000000000000000000000000006000000000000000000000000000000000000000000000000000000007F0000000000000000000000000007000000000000000000000000000000000000000000000000000000007F0000000000000000000000000008000000000000000000000000000000000000000000000000000000007F0000000000000000000000000009000000000000000000000000000000000000000000000000000000007F000000000000000000000000000A000000000000000000000000000000000000000000000000000000007F000000000000000000000000000B000000000000000000000000000000000000000000000000000000007F000000000000000000000000000C000000000000000000000000000000000000000000000000000000007F000000000000000000000000000D000000000000000000000000000000000000000000000000000000007F000000000000000000000000000E000000000000000000000000000000000000000000000000000000007F000000000000000000000000000F000000000000000000000000000000000000000000000000000000007F0000000000000000000000000010000000000000000000000000000000000000000000000000000000007F0000000000000000000000000011000000000000000000000000000000000000000000000000000000007F0000000000000000000000000012000000000000000000000000000000000000000000000000000000007F0000000000000000000000000013000000000000000000000000000000000000000000000000000000007F0000000000000000000000000014000000000000000000000000000000000000000000000000000000007F0000000000000000000000000000000000000000000000000000000000000000000000000000000000007F0000000000000000000000000001000000000000000000000000000000000000000000000000000000007F0000000000000000000000000002000000000000000000000000000000000000000000000000000000007F0000000000000000000000000003000000000000000000000000000000000000000000000000000000007F0000000000000000000000000004000000000000000000000000000000000000000000000000000000007F0000000000000000000000000005000000000000000000000000000000000000000000000000000000007F0000000000000000000000000006000000000000000000000000000000000000000000000000000000007F0000000000000000000000000007000000000000000000000000000000000000000000000000000000007F0000000000000000000000000008000000000000000000000000000000000000000000000000000000007F0000000000000000000000000009000000000000000000000000000000000000000000000000000000007F000000000000000000000000000A000000000000000000000000000000000000000000000000000000007F000000000000000000000000000B000000000000000000000000000000000000000000000000000000007F000000000000000000000000000C000000000000000000000000000000000000000000000000000000007F000000000000000000000000000D000000000000000000000000000000000000000000000000000000007F000000000000000000000000000E000000000000000000000000000000000000000000000000000000007F000000000000000000000000000F000000000000000000000000000000000000000000000000000000007F0000000000000000000000000010000000000000000000000000000000000000000000000000000000007F0000000000000000000000000011000000000000000000000000000000000000000000000000000000007F0000000000000000000000000012000000000000000000000000000000000000000000000000000000007F0000000000000000000000000013000000000000000000000000000000000000000000000000000000007F0000000000000000000000000014000000000000000000000000000000000000000000000000000000007F0000000000000000000000000000000000000000000000000000000000000000000000000000000000007F0000000000000000000000000001000000000000000000000000000000000000000000000000000000007F0000000000000000000000000002000000000000000000000000000000000000000000000000000000007F0000000000000000000000000003000000000000000000000000000000000000000000000000000000007F0000000000000000000000000004000000000000000000000000000000000000000000000000000000007F0000000000000000000000000005000000000000000000000000000000000000000000000000000000007F0000000000000000000000000006000000000000000000000000000000000000000000000000000000007F0000000000000000000000000007000000000000000000000000000000000000000000000000000000007F0000000000000000000000000008000000000000000000000000000000000000000000000000000000007F0000000000000000000000000009000000000000000000000000000000000000000000000000000000007F000000000000000000000000000A000000000000000000000000000000000000000000000000000000007F000000000000000000000000000B000000000000000000000000000000000000000000000000000000007F000000000000000000000000000C000000000000000000000000000000000000000000000000000000007F000000000000000000000000000D000000000000000000000000000000000000000000000000000000007F000000000000000000000000000E000000000000000000000000000000000000000000000000000000007F000000000000000000000000000F000000000000000000000000000000000000000000000000000000007F0000000000000000000000000010000000000000000000000000000000000000000000000000000000007F0000000000000000000000000011000000000000000000000000000000000000000000000000000000007F0000000000000000000000000012000000000000000000000000000000000000000000000000000000007F0000000000000000000000000013000000000000000000000000000000000000000000000000000000007F0000000000000000000000000014000000000000000000000000000000000000000000000000000000007F0000000000000000000000000000000000000000000000000000000000000000000000000000000000007F0000000000000000000000000001000000000000000000000000000000000000000000000000000000007F0000000000000000000000000002000000000000000000000000000000000000000000000000000000007F0000000000000000000000000003000000000000000000000000000000000000000000000000000000007F0000000000000000000000000004000000000000000000000000000000000000000000000000000000007F0000000000000000000000000005000000000000000000000000000000000000000000000000000000007F0000000000000000000000000006000000000000000000000000000000000000000000000000000000007F0000000000000000000000000007000000000000000000000000000000000000000000000000000000007F0000000000000000000000000008000000000000000000000000000000000000000000000000000000007F0000000000000000000000000009000000000000000000000000000000000000000000000000000000007F000000000000000000000000000A000000000000000000000000000000000000000000000000000000007F000000000000000000000000000B000000000000000000000000000000000000000000000000000000007F000000000000000000000000000C000000000000000000000000000000000000000000000000000000007F000000000000000000000000000D000000000000000000000000000000000000000000000000000000007F000000000000000000000000000E000000000000000000000000000000000000000000000000000000007F000000000000000000000000000F000000000000000000000000000000000000000000000000000000007F0000000000000000000000000010000000000000000000000000000000000000000000000000000000007F0000000000000000000000000011000000000000000000000000000000000000000000000000000000007F0000000000000000000000000012000000000000000000000000000000000000000000000000000000007F0000000000000000000000000013000000000000000000000000000000000000000000000000000000007F0000000000000000000000000014000000000000000000000000000000000000000000000000000000007F0000000000000000000000000000000000000000000000000000000000000000000000000000000000007F0000000000000000000000000001000000000000000000000000000000000000000000000000000000007F0000000000000000000000000002000000000000000000000000000000000000000000000000000000007F0000000000000000000000000003000000000000000000000000000000000000000000000000000000007F0000000000000000000000000004000000000000000000000000000000000000000000000000000000007F0000000000000000000000000005000000000000000000000000000000000000000000000000000000007F0000000000000000000000000006000000000000000000000000000000000000000000000000000000007F0000000000000000000000000007000000000000000000000000000000000000000000000000000000007F0000000000000000000000000008000000000000000000000000000000000000000000000000000000007F0000000000000000000000000009000000000000000000000000000000000000000000000000000000007F000000000000000000000000000A000000000000000000000000000000000000000000000000000000007F000000000000000000000000000B000000000000000000000000000000000000000000000000000000007F000000000000000000000000000C000000000000000000000000000000000000000000000000000000007F000000000000000000000000000D000000000000000000000000000000000000000000000000000000007F000000000000000000000000000E000000000000000000000000000000000000000000000000000000007F000000000000000000000000000F000000000000000000000000000000000000000000000000000000007F0000000000000000000000000010000000000000000000000000000000000000000000000000000000007F0000000000000000000000000011000000000000000000000000000000000000000000000000000000007F0000000000000000000000000012000000000000000000000000000000000000000000000000000000007F0000000000000000000000000013000000000000000000000000000000000000000000000000000000007F0000000000000000000000000014000000000000000000000000000000000000000000000000000000007F00000000000000000000000000");
        target.writeBytes(bigChungus);

        // character data
        target.writeBytes(new byte[513]);

        // caddie data
        target.writeBytes(new byte[25]);

        // clubset data
        target.writeBytes(new byte[28]);

        // mascot data
        target.writeBytes(new byte[62]);

        ProtocolUtils.writeLocalDateTime(target, LocalDateTime.now());

        // server info
        target.writeShortLE(0);
        target.writeShortLE(0xFFFF);
        target.writeShortLE(0xFFFF);
        target.writeShortLE(0xFFFF);
        target.writeIntLE(0);
        target.writeLongLE(0);
        target.writeIntLE(363);
        target.writeIntLE(0);

        // guild info
        target.writeIntLE(0);
        ProtocolUtils.writeFixedSizeString(target, "", 17);
        target.writeIntLE(0);
        target.writeIntLE(0);
        target.writeIntLE(0);
        ProtocolUtils.writeFixedSizeString(target, "", 9);
        target.writeMediumLE(0);
        ProtocolUtils.writeFixedSizeString(target, "", 101);
        ProtocolUtils.writeFixedSizeString(target, "", 101);
        target.writeIntLE(0);
        target.writeIntLE(0);
        ProtocolUtils.writeFixedSizeString(target, "", 22);

    }
}
